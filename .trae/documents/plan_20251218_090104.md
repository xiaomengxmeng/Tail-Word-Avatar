1. **修改tail\_word\_avatar.js文件的内容函数**

   * 移除当前简单的正则表达式小尾巴移除逻辑

   * 实现与快捷功能文件完全相同的小尾巴处理逻辑

   * 添加所需的关键字定义

   * 保留原有的其他条件判断和小尾巴添加逻辑

2. **修改后的代码结构**

   ```javascript
   content: function () {
       // 获取原始消息内容
       let originalContent = t;
       let currentSuffix = getCurrentSuffixText();
       let strOriginalContent = String(originalContent);
       
       // 小尾巴固定关键字
       const wb_keyword = '\n\n> ';
       // 区别小尾巴固定关键字的引用关键字
       const tab_keyword = '"跳转至原消息")';
       
       // 复读之替换别人的小尾巴（太邪恶了）
       if (strOriginalContent.includes(wb_keyword)) {
           var wbEnd = strOriginalContent.lastIndexOf(wb_keyword);
           var wbStartMsg = strOriginalContent.substring(0, wbEnd);
           // 如果是双击引用 则改为截取最后正确的小尾巴部分
           if (wbStartMsg.includes(tab_keyword) && (wbStartMsg.lastIndexOf(tab_keyword) + tab_keyword.length) == wbStartMsg.length) {
               // 探寻到引用的末端 检查是否出现两个引用层级
               var tabEnd = strOriginalContent.lastIndexOf(tab_keyword);
               var tabEndStr = strOriginalContent.substring(tabEnd + tab_keyword.length);
               if(tabEndStr.lastIndexOf('> ') == tabEndStr.indexOf('> ')) {
                   // 说明是最后一个层级，不去除小尾巴
                   wbStartMsg = strOriginalContent;
               } else {
                   wbStartMsg = strOriginalContent.substring(0, strOriginalContent.lastIndexOf('> '));
               }
           }
           // 截取原消息并添加自己的小尾巴
           return wbStartMsg + '\n\n\n>  ' + currentSuffix;
       }
       
       // 处理小尾巴和单词
       if (strOriginalContent.includes(currentSuffix) || t.trim().length == 0 || (!suffixFlag) || needwb == 0 || t.trim().startsWith('凌 ') || t.trim().startsWith('鸽 ') || t.trim().startsWith('小冰 ') || t.trim().startsWith('冰冰 ') || t.trim().startsWith('点歌 ') || t.trim().startsWith('TTS ') || t.trim().startsWith('朗读 ')) {
           return originalContent;
       } else if (wordCount === 0) {
           return originalContent + '\n\n\n>  ' + currentSuffix;
       } else {
           // 定义包含小尾巴的wbMsg
           var wbMsg = '\n\n\n>  ' + currentSuffix;
           return originalContent + wordMsg + wbMsg;
       }
   }(),
   ```

3. **修改后的预期效果**

   * 对于包含小尾巴的消息，会替换为自己的小尾巴

   * 对于双击引用的消息，会根据引用层级决定是否去除小尾巴

   * 与快捷功能文件的小尾巴处理方式完全一致

   * 保持原有的其他条件判断和小尾巴添加逻辑不变

4. **代码验证**

   * 确保修改后的代码语法正确

   * 确保逻辑与快捷功能文件完全一致

   * 确保不影响其他功能


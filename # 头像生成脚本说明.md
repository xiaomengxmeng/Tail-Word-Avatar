# 头像生成脚本说明文档

## 脚本概述
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=&url=https://file.fishpi.cn/2025/11/premiumVIP-dbf070c6.gif&backcolor=ff69b4,ffff1c,00c3ff&fontcolor=ffffff&shadow=0.8&anime=3&way=left&fontway=left)
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=%E8%89%BE%E8%BE%BE%E5%8D%8F%E4%BC%9A+%2D+%E5%AE%88%E6%8A%A4%E6%9C%80%E5%A5%BD%E7%9A%84%E9%98%BF%E8%BE%BE&url=https://file.fishpi.cn/2025/11/premiumVIP-dbf070c6.gif&backcolor=ff69b4,ffff1c,00c3ff&fontcolor=ffffff&shadow=0.8&anime=3&way=left&fontway=left)
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=%E7%88%B1%E8%80%8C%E4%B8%8D%E5%BE%97%20%2D%20%E6%AD%A2%E4%BA%8E%E5%94%87%E9%BD%BF%EF%BC%8C%E6%8E%A9%E4%BA%8E%E5%B2%81%E6%9C%88&url=https://file.fishpi.cn/2025/10/aj1-6b5eb828.gif&backcolor=F5DC78,C8B4FF,ffffff&shadow=0.8&anime=3&way=right&fontway=right&fontcolor=ffffff,F5DC78 "爱而不得 - 止于唇齿，掩于岁月")
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=%E7%88%B1%E8%80%8C%E4%B8%8D%E5%BE%97&url=https://file.fishpi.cn/2025/10/aj1-6b5eb828.gif&backcolor=F5DC78,C8B4FF,ffffff&shadow=0.8&anime=3&way=right&fontway=right&fontcolor=ffffff,F5DC78 "爱而不得")
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=%E5%9B%9B%E5%AD%A3%E6%9C%89%E4%BD%A0&url=https://file.fishpi.cn/2024/12/0009-4d0c6287.png&backcolor=4daffe&fontcolor=ffffff "四季有你")
![图片表情](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=Azi%F0%9F%92%9C%F0%9F%92%9C%F0%9F%92%9C&url=https://file.fishpi.cn/2025/07/%E7%B4%AB%E8%89%B2%E5%B0%8F%E4%BB%93%E9%BC%A0GIF%E8%A1%A8%E6%83%859%E7%88%B1%E7%BB%99%E7%BD%91aigeicom-2781678a.gif&backcolor=ffffff,E8D5FF&fontcolor=9933CC,ffffff)
![图片表情](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=%E7%93%A6%E8%BE%BE%E8%A5%BF%E7%93%A6%E6%B3%A1%E6%B3%A1%E8%8C%B6&url=https://file.fishpi.cn/2025/10/17605791587999f873c31-507bde29.gif&backcolor=E8F4FF,ffffff&fontcolor=3366CC,ffffff)
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=&url=https://file.fishpi.cn/2025/10/20191103132716qnsol2-d57b2cc7.gif?imageView2/0/w/150/h/150/interlace/0/q/90&backcolor=70f3ff,2e4e7e&fontcolor=d6ecf0&shadow=0.8&anime=5&way=top-left&fontway=45deg)
![](https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=&url=https://file.fishpi.cn/2022/06/adgif-0acb564d.gif?imageView2/0/w/150/h/150/interlace/0/q/90&backcolor=7331cd&fontcolor=f5c6cd&shadow=0.8&anime=5&way=top-left&fontway=45deg "艾达协会 - 守护最好的阿达！")

**头像生成脚本**是一个功能丰富的油猴脚本，专为鱼排聊天室(fishpi.cn)设计，提供了头像生成和快捷聊天功能，支持通过油猴菜单动态自定义头像样式。

## 主要功能

### 1. 头像生成功能
- 提供自定义文字头像生成按钮
- 支持自定义头像文字内容
- 支持配置背景图片、颜色和字体颜色
- 通过油猴菜单支持动态修改头像背景URL
- 提供41种预设渐变颜色组合供选择
- 支持测试模式，可以一次性查看所有颜色组合效果而不发送消息
- 支持自定义头像大小，通过滑块灵活调整从0.5到5.0的缩放比例

```js
var avatarGenButton = document.createElement('button');
            avatarGenButton.id = 'avatar-gen-button';
            avatarGenButton.textContent = 'Test';
            avatarGenButton.className = 'red';
            avatarGenButton.setAttribute('style', 'margin-right:5px');
            avatarGenButton.onclick = function() {
                const customText = prompt("请输入头像上显示的文字：", avatarConfig.defaultText);
                const textToUse = customText === null || customText.trim() === '' ? avatarConfig.defaultText : customText.trim();
                const encodedText = encodeURIComponent(textToUse);
                const avatarUrl = `https://fishpi.cn/gen?ver=0.1&scale=0.79&txt=${encodedText}&url=${avatarConfig.baseImageUrl}&backcolor=${avatarConfig.backgroundColor}&fontcolor=${avatarConfig.fontColor}`;
                sendMsgApi(`![图片表情](${avatarUrl})`);
            };
```

### 2. 快捷聊天按钮
- 提供6个快捷聊天按钮，分别为：
  - **打劫**：发送「冰冰 去打劫」消息
  - **鸽**：发送「鸽 行行好吧」消息
  - **Test**：打开头像生成对话框
  - **红包**：发送「冰冰 来个红包」消息
  - **雷**：发送「雷公助我」消息
  - **火**：发送「火烧连营」消息

### 3. 油猴菜单功能
- **设置头像背景URL**：通过对话框修改头像背景图片URL
- **选择头像颜色组合**：打开颜色选择面板，提供18种预设渐变颜色方案

### 4. 配置持久化存储
- 所有设置自动保存到浏览器localStorage
- 页面刷新后设置不会丢失


## 配置说明

脚本中的配置项通过`loadConfig`函数从`localStorage`加载，包含以下可自定义选项：

```javascript
// 默认配置结构
const defaultConfig = {
    // 默认头像文字
    defaultText: '不想桀桀桀',
    generateApiUrl: 'https://fishpi.cn/gen?ver=0.1&scale=1.5',
    backgroundColor: 'ffffff,E8D5FF',
    fontColor: '9933CC,ffffff',
    baseImageUrl: '',
    scale: 0.79, // 默认缩放比例
    testMode: true // 默认启用测试模式
};
```

- **defaultText**: 生成头像时的默认提示文字
- **generateApiUrl**: 头像生成API地址
- **backgroundColor**: 头像背景颜色（十六进制值，支持渐变色）
- **fontColor**: 头像文字颜色（十六进制值，支持渐变色）
- **baseImageUrl**: 头像背景图片URL
- **scale**: 头像缩放比例，控制头像的大小和清晰度，范围0.5-5.0，默认0.79
- **testMode**: 测试模式开关，启用时点击Test按钮会在控制台输出所有颜色组合而不发送消息

> 注意：配置会自动保存到浏览器的localStorage中，用户通过油猴菜单进行的设置将在页面刷新后保留

## 使用方法

1. 将脚本安装到Tampermonkey、Violentmonkey等油猴扩展
2. 访问鱼排聊天室网站（https://fishpi.cn/）
3. 在聊天输入框上方将自动显示6个红色按钮
4. 点击**Test**按钮可打开头像生成对话框，输入自定义文字
5. 点击其他按钮可快速发送对应消息

### 调整头像大小
1. 点击浏览器工具栏中的油猴图标
2. 选择「设置头像大小」选项
3. 在弹出的面板中，拖动滑块调整头像大小（范围：0.5-5.0）
4. 实时预览框会显示调整效果
5. 点击「确认」保存设置，或点击「取消」放弃更改
![头像大小设置](img/头像大小设置.png.png)
> 注意：头像大小设置会自动保存到浏览器的localStorage中，页面刷新后设置不会丢失

## 自定义指南

### 使用油猴菜单自定义头像（推荐）

#### 1. 修改头像背景URL
1. 点击浏览器工具栏中的油猴图标
2. 选择「设置头像背景URL」选项
3. 在弹出的对话框中输入新的头像背景图片URL
4. 点击确定保存设置

![油猴控制面板](img/油猴控制面板.png)

#### 2. 选择预设颜色组合
1. 点击浏览器工具栏中的油猴图标
2. 选择「选择头像颜色组合」选项
3. 在弹出的颜色选择面板中，点击您喜欢的颜色组合
4. 系统会自动保存您的选择并关闭面板

![选择头像组合](img/选择头像组合.png)

### 预设颜色组合列表
脚本提供了41种精心设计的渐变颜色组合，包括：

1. **单色渐变**：
   - 优雅紫色、清新蓝色、自然绿色、温柔粉色、明亮黄色、简约黑白
   - 活力橙色、宁静青色、浪漫紫罗兰、典雅金色、深海蓝色、淡紫渐变
   - 薄荷绿、珊瑚粉、天蓝渐变、薰衣草紫、抹茶绿、暖橙色
   - 海洋蓝、阳光黄、高级灰、樱花粉、蜜黄色、淡雅灰、金色渐变

2. **跨色系渐变**：
   - 梦幻紫粉、紫蓝渐变、橙红渐变、绿青渐变、粉紫渐变、蓝青渐变
   - 黄橙渐变、紫蓝混色、薄荷青、橙蓝撞色、黄粉渐变、橙紫渐变
   - 梦幻粉紫、清新紫绿、绿橙渐变

### 获取鱼排头像URL的方法
如果您想使用鱼排网站上的图片作为背景：
1. 访问鱼排网站并登录
2. 使用浏览器的开发者工具（F12）
3. 找到并复制您喜欢的图片URL
4. 通过油猴菜单的「设置头像背景URL」功能粘贴使用

![鱼排头像获取](img/鱼排头像获取.png)javascript
// 示例：修改背景图片
avatarConfig.baseImageUrl = 'https://example.com/your-custom-image.png';
```

您可以使用自己喜欢的图片作为头像背景：
获取鱼排头像URL的方法：

1. 访问鱼排网站并登录
2. 使用浏览器的开发者工具（F12）
3. 找到并复制您的头像图片URL
4. 将复制的URL粘贴到`baseImageUrl`配置项中

![鱼排头像获取-ec3293cd.png](https://file.fishpi.cn/2025/10/鱼排头像获取-ec3293cd.png)

### 添加新的快捷按钮

如需添加新的快捷按钮，可参考现有按钮创建代码：

```javascript
// 示例：添加新按钮
var newButton = document.createElement('button');
newButton.id = 'new-button';
newButton.textContent = '新按钮';
newButton.className = 'red';
newButton.setAttribute('style', 'margin-right:5px');
newButton.onclick = function() {
    sendMsgApi('新按钮发送的消息');
};

// 添加到图层，避免重复添加
if (!document.getElementById('new-button')) elve.appendChild(newButton);
```

## 注意事项

- 脚本仅在鱼排聊天室(fishpi.cn)网站生效
- 脚本在打赏区


